<!DOCTYPE html>
<html lang="zh">
<head><meta name="generator" content="Hexo 3.9.0">
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="utf-8">
    
    <title>python数据规整_分组_聚合 | atlantic8</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="description" content="数据合并DataFrame合并1234import pandas as pdfrom pandas import DataFrame,Seriesimport numpy as nppd.merge(***) merge方法merge函数的参数      param explanation param explanation     left 左侧的DataFrame right 右侧的DataF">
<meta name="keywords" content="python,数据分析">
<meta property="og:type" content="article">
<meta property="og:title" content="python数据规整_分组_聚合">
<meta property="og:url" content="atlantic8.github.io/2016/08/15/python数据规整-分组-聚合/index.html">
<meta property="og:site_name" content="atlantic8">
<meta property="og:description" content="数据合并DataFrame合并1234import pandas as pdfrom pandas import DataFrame,Seriesimport numpy as nppd.merge(***) merge方法merge函数的参数      param explanation param explanation     left 左侧的DataFrame right 右侧的DataF">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-09-20T16:38:00.053Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="python数据规整_分组_聚合">
<meta name="twitter:description" content="数据合并DataFrame合并1234import pandas as pdfrom pandas import DataFrame,Seriesimport numpy as nppd.merge(***) merge方法merge函数的参数      param explanation param explanation     left 左侧的DataFrame right 右侧的DataF">
    

    

    
        <link rel="icon" href="/css/images/logo.png">
    

    <link rel="stylesheet" href="/libs/font-awesome5/css/fontawesome.min.css">
    <link rel="stylesheet" href="/libs/font-awesome5/css/fa-brands.min.css">
    <link rel="stylesheet" href="/libs/font-awesome5/css/fa-solid.min.css">
    <link rel="stylesheet" href="/libs/open-sans/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.1.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    
    
        <script>
var _hmt = _hmt || [];
(function() {
    var hm = document.createElement("script");
    hm.src = "//hm.baidu.com/hm.js?ff86ad40748d96af89d192e9b0a3ae62";
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(hm, s);
})();
</script><!-- hexo-inject:begin --><!-- hexo-inject:end -->

    


</head>
</html>
<body>
    <!-- hexo-inject:begin --><!-- hexo-inject:end --><div id="container">
        <header id="header">
    <div id="header-main" class="header-inner">
        <div class="outer">
            <a href="/" id="logo">
                <i class="logo"></i>
                <span class="site-title">atlantic8</span>
            </a>
            <nav id="main-nav">
                
                    <a class="main-nav-link" href="/.">Home</a>
                
                    <a class="main-nav-link" href="/archives">Archives</a>
                
                    <a class="main-nav-link" href="/categories/OJ">OJ</a>
                
                    <a class="main-nav-link" href="/categories/Algorithm">Algorithm</a>
                
                    <a class="main-nav-link" href="/about">About</a>
                
            </nav>
            
                
                <nav id="sub-nav">
                    <div class="profile" id="profile-nav">
                        <a id="profile-anchor" href="javascript:;">
                            <img class="avatar" src="/css/images/f35.png" />
                            <i class="fas fa-caret-down"></i>
                        </a>
                    </div>
                </nav>
            
            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fas fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
        </div>
    </div>
    <div id="main-nav-mobile" class="header-sub header-inner">
        <table class="menu outer">
            <tr>
                
                    <td><a class="main-nav-link" href="/.">Home</a></td>
                
                    <td><a class="main-nav-link" href="/archives">Archives</a></td>
                
                    <td><a class="main-nav-link" href="/categories/OJ">OJ</a></td>
                
                    <td><a class="main-nav-link" href="/categories/Algorithm">Algorithm</a></td>
                
                    <td><a class="main-nav-link" href="/about">About</a></td>
                
                <td>
                    
    <div class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
    </div>

                </td>
            </tr>
        </table>
    </div>
</header>

        <div class="outer">
            
                

<aside id="profile" class="profile-fixed">
    <div class="inner profile-inner">
        <div class="base-info profile-block">
            <img id="avatar" src="/css/images/f35.png" />
            <h2 id="name">Atlantic8</h2>
            <h3 id="title">algorithm engineer</h3>
            <span id="location"><i class="fas fa-map-marker-alt" style="padding-right: 5px"></i>Beijing, China</span>
            <a id="follow" target="_blank" href="https://github.com/Atlantic8">关注我</a>
        </div>
        <div class="article-info profile-block">
            <div class="article-info-block">
                119
                <span>文章</span>
            </div>
            <div class="article-info-block">
                45
                <span>标签</span>
            </div>
        </div>
        
        <div class="profile-block social-links">
            <table>
                <tr>
                    
                    
                    <td>
                        <a href="https://github.com/Atlantic8" target="_blank" title="github" class=tooltip>
                            
                                <i class="fab fa-github"></i>
                            
                        </a>
                    </td>
                    
                    <td>
                        <a href="https://www.linkedin.com/in/wenqiang-cao-704236b8/" target="_blank" title="linkedin" class=tooltip>
                            
                                <i class="fab fa-linkedin"></i>
                            
                        </a>
                    </td>
                    
                    <td>
                        <a href="mailto:atlantic8@outlook.com" target="_blank" title="envelope" class=tooltip>
                            
                                <i class="fas fa-envelope"></i>
                            
                        </a>
                    </td>
                    
                    <td>
                        <a href="http://weibo.com/2614093607" target="_blank" title="weibo" class=tooltip>
                            
                                <i class="fab fa-weibo"></i>
                            
                        </a>
                    </td>
                    
                    <td>
                        <a href="/" target="_blank" title="facebook" class=tooltip>
                            
                                <i class="fab fa-facebook"></i>
                            
                        </a>
                    </td>
                    
                </tr>
            </table>
        </div>
        
    </div>
</aside>

            
            <section id="main"><article id="post-python数据规整-分组-聚合" class="article article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
            python数据规整_分组_聚合
        </h1>
    

                
                    <div class="article-meta">
                        
    <div class="article-date">
        <i class="fas fa-calendar-alt"></i>
        <a href="/2016/08/15/python数据规整-分组-聚合/">
            <time datetime="2016-08-15T11:09:26.000Z" itemprop="datePublished">2016-08-15</time>
        </a>
    </div>


                        
                        
    <div class="article-tag">
        <i class="fas fa-tag"></i>
        <a class="tag-link" href="/tags/python/">python</a>, <a class="tag-link" href="/tags/数据分析/">数据分析</a>
    </div>

                    </div>
                
            </header>
        
        
        <div class="article-entry" itemprop="articleBody">
        
            
            <h4 id="数据合并"><a href="#数据合并" class="headerlink" title="数据合并"></a>数据合并</h4><h5 id="DataFrame合并"><a href="#DataFrame合并" class="headerlink" title="DataFrame合并"></a>DataFrame合并</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> pandas <span class="keyword">import</span> DataFrame,Series</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line">pd.merge(***)</span><br></pre></td></tr></table></figure>
<h6 id="merge方法"><a href="#merge方法" class="headerlink" title="merge方法"></a>merge方法</h6><center>merge函数的参数</center>

<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">param</th>
<th style="text-align:center">explanation</th>
<th style="text-align:center">param</th>
<th style="text-align:center">explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">left</td>
<td style="text-align:center">左侧的DataFrame</td>
<td style="text-align:center">right</td>
<td style="text-align:center">右侧的DataFrame</td>
</tr>
<tr>
<td style="text-align:center">how</td>
<td style="text-align:center">连接方式，inner、outer、left、right，默认为inner</td>
<td style="text-align:center">on</td>
<td style="text-align:center">指定连接的列名</td>
</tr>
<tr>
<td style="text-align:center">left_on</td>
<td style="text-align:center">左侧DataFrame用于连接的键名</td>
<td style="text-align:center">right_on</td>
<td style="text-align:center">右侧DataFrame用于连接的键名</td>
</tr>
<tr>
<td style="text-align:center">left_index</td>
<td style="text-align:center">将左侧的行索引用作其连接键</td>
<td style="text-align:center">right_index</td>
<td style="text-align:center">将右侧的行索引用作其连接键</td>
</tr>
<tr>
<td style="text-align:center">sort</td>
<td style="text-align:center">对合并后的数据在连接键上排序，默认为True</td>
<td style="text-align:center">suffixes</td>
<td style="text-align:center">重叠列名后缀，用于重复列名区分</td>
</tr>
<tr>
<td style="text-align:center">copy</td>
<td style="text-align:center">默认为True，设置为False可以避免将数据复制到结果数据结构中</td>
<td style="text-align:center">————</td>
<td style="text-align:center">————-</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">left1 = DataFrame(&#123;<span class="string">'key'</span>:[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'a'</span>,<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>], <span class="string">'value'</span>:range(<span class="number">6</span>)&#125;)</span><br><span class="line">$-&gt; key  value</span><br><span class="line"><span class="number">0</span>   a      <span class="number">0</span></span><br><span class="line"><span class="number">1</span>   b      <span class="number">1</span></span><br><span class="line"><span class="number">2</span>   a      <span class="number">2</span></span><br><span class="line"><span class="number">3</span>   a      <span class="number">3</span></span><br><span class="line"><span class="number">4</span>   b      <span class="number">4</span></span><br><span class="line"><span class="number">5</span>   c      <span class="number">5</span></span><br><span class="line"></span><br><span class="line">right1 = DataFrame(&#123;<span class="string">'group_val'</span>:[<span class="number">2</span>,<span class="number">5</span>]&#125;,index=[<span class="string">'a'</span>,<span class="string">'b'</span>])</span><br><span class="line">$-&gt; group_val</span><br><span class="line">a          <span class="number">2</span></span><br><span class="line">b          <span class="number">5</span></span><br><span class="line"></span><br><span class="line">pd.merge(left1, right1, left_on=<span class="string">'key'</span>, right_index=<span class="keyword">True</span>)</span><br><span class="line">$-&gt; key  value  group_val</span><br><span class="line"><span class="number">0</span>   a      <span class="number">0</span>          <span class="number">2</span></span><br><span class="line"><span class="number">2</span>   a      <span class="number">2</span>          <span class="number">2</span></span><br><span class="line"><span class="number">3</span>   a      <span class="number">3</span>          <span class="number">2</span></span><br><span class="line"><span class="number">1</span>   b      <span class="number">1</span>          <span class="number">5</span></span><br><span class="line"><span class="number">4</span>   b      <span class="number">4</span>          <span class="number">5</span></span><br></pre></td></tr></table></figure>
<p><b>层次化索引应当以列表的形式指明用作合并键的多个列<b></b></b></p>
<h6 id="join方法"><a href="#join方法" class="headerlink" title="join方法"></a>join方法</h6><ul>
<li>join方法可以更为方便地实现按索引合并</li>
<li>可以合并多个带有相同或相似索引的DataFrame对象</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># on指定调用者的连接键</span></span><br><span class="line">left.join(right, how=<span class="string">''</span>, on=<span class="string">''</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 多个DataFrame合并</span></span><br><span class="line">another = DataFrame(....)</span><br><span class="line">left2.join([right2, another])</span><br></pre></td></tr></table></figure>
<h6 id="concat方法"><a href="#concat方法" class="headerlink" title="concat方法"></a>concat方法</h6><p>concat方法用于轴向连接、绑定、堆叠操作<br>numpy有一个合并原始NumPy数组的concatenate的函数</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">arr = np.arange(<span class="number">12</span>).reshape((<span class="number">3</span>,<span class="number">4</span>))</span><br><span class="line"><span class="comment"># axis=1水平连接，axis=0垂直连接</span></span><br><span class="line">np.concatenate([arr, arr], axis=<span class="number">1</span>)</span><br></pre></td></tr></table></figure>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">s1 = Series([<span class="number">0</span>,<span class="number">1</span>], index=[<span class="string">'a'</span>, <span class="string">'b'</span>])</span><br><span class="line">s2 = Series([<span class="number">2</span>,<span class="number">3</span>,<span class="number">4</span>], index=[<span class="string">'c'</span>,<span class="string">'d'</span>, <span class="string">'e'</span>])</span><br><span class="line">s3 = Series([<span class="number">5</span>,<span class="number">6</span>], index=[<span class="string">'f'</span>, <span class="string">'g'</span>])</span><br><span class="line"><span class="comment"># 默认 axis=0</span></span><br><span class="line">pd.concat([s1, s2, s3])</span><br><span class="line">$-&gt; a    0</span><br><span class="line">    b    <span class="number">1</span></span><br><span class="line">    c    <span class="number">2</span></span><br><span class="line">    d    <span class="number">3</span></span><br><span class="line">    e    <span class="number">4</span></span><br><span class="line">    f    <span class="number">5</span></span><br><span class="line">    g    <span class="number">6</span></span><br><span class="line">    dtype: int64</span><br><span class="line"></span><br><span class="line">pd.concat([s1, s2, s3], axis=<span class="number">1</span>)</span><br><span class="line">$-&gt; 0    1    2</span><br><span class="line">a  <span class="number">0.0</span>  NaN  NaN</span><br><span class="line">b  <span class="number">1.0</span>  NaN  NaN</span><br><span class="line">c  NaN  <span class="number">2.0</span>  NaN</span><br><span class="line">d  NaN  <span class="number">3.0</span>  NaN</span><br><span class="line">e  NaN  <span class="number">4.0</span>  NaN</span><br><span class="line">f  NaN  NaN  <span class="number">5.0</span></span><br><span class="line">g  NaN  NaN  <span class="number">6.0</span></span><br></pre></td></tr></table></figure>
<center>concat函数的参数</center>

<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">param</th>
<th style="text-align:center">explanation</th>
<th style="text-align:center">param</th>
<th style="text-align:center">explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">objs</td>
<td style="text-align:center">参与连接的pandas对象的列表或字典，必需参数</td>
<td style="text-align:center">axis</td>
<td style="text-align:center">指明连接轴向，默认为0，参考上面示例</td>
</tr>
<tr>
<td style="text-align:center">join</td>
<td style="text-align:center">连接方式，inner、outer，默认为outer</td>
<td style="text-align:center">join_axes</td>
<td style="text-align:center">指明其他n-1条轴的索引，不执行并集、交集运算</td>
</tr>
<tr>
<td style="text-align:center">keys</td>
<td style="text-align:center">用于形成连接轴上的层次化索引</td>
<td style="text-align:center">levels</td>
<td style="text-align:center">指定层次化索引上各级别的索引</td>
</tr>
<tr>
<td style="text-align:center">names</td>
<td style="text-align:center">用于创建分层级别的索引，如果设置了keys和levels的话</td>
<td style="text-align:center">verify_integrity</td>
<td style="text-align:center">检查结果对象新轴上的重复对象</td>
</tr>
<tr>
<td style="text-align:center">ignore_index</td>
<td style="text-align:center">不保留连接轴上的索引，产生新索引range()</td>
<td style="text-align:center">——-</td>
<td style="text-align:center">———————-</td>
</tr>
</tbody>
</table>
</div>
<p><b>重塑层次化索引</b></p>
<ul>
<li>stack 将数据的列‘旋转’为行</li>
<li>unstack 将数据的行‘旋转’为列</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">data = DataFrame(np.arange(<span class="number">6</span>).reshape((<span class="number">2</span>,<span class="number">3</span>)), index=pd.Index([<span class="string">'Ohio'</span>,<span class="string">'Colorado'</span>],name=<span class="string">'state'</span>), columns=pd.Index([<span class="string">'one'</span>,<span class="string">'two'</span>,<span class="string">'three'</span>],name=<span class="string">'number'</span>))</span><br><span class="line">$-&gt; data</span><br><span class="line">number    one  two  three</span><br><span class="line">state</span><br><span class="line">Ohio        <span class="number">0</span>    <span class="number">1</span>      <span class="number">2</span></span><br><span class="line">Colorado    <span class="number">3</span>    <span class="number">4</span>      <span class="number">5</span></span><br><span class="line"></span><br><span class="line">result = data.stack()</span><br><span class="line">result</span><br><span class="line">$-&gt; state     number</span><br><span class="line">    Ohio      one       <span class="number">0</span></span><br><span class="line">                two       <span class="number">1</span></span><br><span class="line">              three     <span class="number">2</span></span><br><span class="line">    Colorado  one       <span class="number">3</span></span><br><span class="line">              two       <span class="number">4</span></span><br><span class="line">              three     <span class="number">5</span></span><br><span class="line">    dtype: int32</span><br><span class="line"></span><br><span class="line">result.unstack()</span><br><span class="line">$-&gt; number    one  two  three</span><br><span class="line">    state</span><br><span class="line">    Ohio        <span class="number">0</span>    <span class="number">1</span>      <span class="number">2</span></span><br><span class="line">    Colorado    <span class="number">3</span>    <span class="number">4</span>      <span class="number">5</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># unstack(和stack一样)默认操作的是最内层地址，给函数传入层次级别的编号或者名称即可在不同级别操作。</span></span><br><span class="line">result.unstack(<span class="number">0</span>)</span><br><span class="line">$-&gt; state   Ohio  Colorado</span><br><span class="line">    number</span><br><span class="line">    one        <span class="number">0</span>         <span class="number">3</span></span><br><span class="line">    two        <span class="number">1</span>         <span class="number">4</span></span><br><span class="line">    three      <span class="number">2</span>         <span class="number">5</span></span><br><span class="line">result.unstack(<span class="string">'state'</span>)  <span class="comment"># 效果同上</span></span><br></pre></td></tr></table></figure>
<p>unstack操作可能会产生缺失值，而stack操作默认会过滤缺失值，可以设置参数dropna=False取消。</p>
<h4 id="数据转换"><a href="#数据转换" class="headerlink" title="数据转换"></a>数据转换</h4><h5 id="去重"><a href="#去重" class="headerlink" title="去重"></a>去重</h5><ul>
<li>DataFrame的duplicated()方法返回一个bool型Series实例，指示每一行是否是重复行</li>
<li>DataFrame的drop_duplicates()方法返回一个移除重复行的DataFrame</li>
<li>drop_duplicates()默认保留第一个出现的值组合，设置take_last=True则保留最后一个</li>
<li>指定部分列进行重复项判断，drop_duplicates([‘a1’, ‘a2’])</li>
</ul>
<h5 id="替换"><a href="#替换" class="headerlink" title="替换"></a>替换</h5><ul>
<li>Series中的replace函数可以进行替换操作</li>
<li>data.replace(a, b)</li>
<li>data.replace([a1, a2], b)</li>
<li>data.replace([a1, a2], [b1, b2])</li>
</ul>
<h5 id="映射"><a href="#映射" class="headerlink" title="映射"></a>映射</h5><ul>
<li>Series的map方法接受一个函数，或者含有映射关系的字典对象，返回一个映射后的Series对象</li>
<li>data.map(str.lower)</li>
<li>data.map(lambda x : str.lower(x))</li>
</ul>
<h5 id="离散化与bin划分"><a href="#离散化与bin划分" class="headerlink" title="离散化与bin划分"></a>离散化与bin划分</h5><ul>
<li>cut函数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">ages = [<span class="number">20</span>,<span class="number">22</span>,<span class="number">25</span>,<span class="number">27</span>,<span class="number">21</span>,<span class="number">23</span>,<span class="number">37</span>,<span class="number">31</span>,<span class="number">61</span>,<span class="number">45</span>,<span class="number">41</span>,<span class="number">32</span>]</span><br><span class="line">bins = [<span class="number">18</span>, <span class="number">25</span>, <span class="number">35</span>, <span class="number">60</span> ,<span class="number">100</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将ages按照bins划分进行切割</span></span><br><span class="line"><span class="comment"># 直接切割得到的区间是左开右闭的，设置right=False可以得到左闭右开区间</span></span><br><span class="line"><span class="comment"># 设置参数labels=['a1','a2',...,'an']可以更改区间名称</span></span><br><span class="line"><span class="comment"># 也可以不传入bins，直接传入整数n表示分成n个区间，函数会根据最值等间距划分</span></span><br><span class="line"></span><br><span class="line">cats = pd.cut(ages, bins)</span><br><span class="line">cats</span><br><span class="line">$-&gt; [(18, 25], (18, 25], (18, 25], (25, 35], (18, 25], ..., (25, 35], (</span><br><span class="line">      <span class="number">60</span>, <span class="number">100</span>], (<span class="number">35</span>, <span class="number">60</span>], (<span class="number">35</span>, <span class="number">60</span>], (<span class="number">25</span>, <span class="number">35</span>]]</span><br><span class="line">    Length: <span class="number">12</span></span><br><span class="line">    Categories (<span class="number">4</span>, object): [(<span class="number">18</span>, <span class="number">25</span>] &lt; (<span class="number">25</span>, <span class="number">35</span>] &lt; (<span class="number">35</span>, <span class="number">60</span>] &lt; (<span class="number">60</span>, <span class="number">100</span>]</span><br><span class="line">    ]</span><br><span class="line"></span><br><span class="line">cats.codes   <span class="comment">#每个数据的标签</span></span><br><span class="line">$-&gt; array([0, 0, 0, 1, 0, 0, 2, 1, 3, 2, 2, 1], dtype=int8)</span><br><span class="line">cats.categories  <span class="comment">#区间信息</span></span><br><span class="line">$-&gt; Index([u'(18, 25]', u'(25, 35]', u'(35, 60]', u'(60, 100]'], dtype='object')</span><br><span class="line"></span><br><span class="line"><span class="comment"># 简单统计</span></span><br><span class="line">pd.value_count(cats)</span><br><span class="line">$-&gt; (18, 25]     5</span><br><span class="line">    (<span class="number">35</span>, <span class="number">60</span>]     <span class="number">3</span></span><br><span class="line">    (<span class="number">25</span>, <span class="number">35</span>]     <span class="number">3</span></span><br><span class="line">    (<span class="number">60</span>, <span class="number">100</span>]    <span class="number">1</span></span><br><span class="line">    dtype: int64</span><br></pre></td></tr></table></figure>
<ul>
<li>qcut函数根据样本分位数对样本进行划分，可以使得每个bin中的数据数量比较接近</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">data = np.random.rand(<span class="number">1000</span>)</span><br><span class="line"><span class="comment"># 5分位数</span></span><br><span class="line">cats = pd.qcut(data, <span class="number">5</span>)</span><br><span class="line">pd.value_counts(cats)</span><br><span class="line">$-&gt; (0.813, 1]           200</span><br><span class="line">    (<span class="number">0.628</span>, <span class="number">0.813</span>]       <span class="number">200</span></span><br><span class="line">    (<span class="number">0.421</span>, <span class="number">0.628</span>]       <span class="number">200</span></span><br><span class="line">    (<span class="number">0.223</span>, <span class="number">0.421</span>]       <span class="number">200</span></span><br><span class="line">    [<span class="number">0.000386</span>, <span class="number">0.223</span>]    <span class="number">200</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 自定义的分位数</span></span><br><span class="line">cats = pd.qcut(data, [<span class="number">0</span>, <span class="number">0.1</span>, <span class="number">0.5</span>, <span class="number">0.9</span>, <span class="number">1.0</span>])</span><br><span class="line">pd.value_counts(cats)</span><br><span class="line">$-&gt; (0.539, 0.901]       400</span><br><span class="line">    (<span class="number">0.127</span>, <span class="number">0.539</span>]       <span class="number">400</span></span><br><span class="line">    (<span class="number">0.901</span>, <span class="number">1</span>]           <span class="number">100</span></span><br><span class="line">    [<span class="number">0.000386</span>, <span class="number">0.127</span>]    <span class="number">100</span></span><br><span class="line">    dtype: int64</span><br></pre></td></tr></table></figure>
<h5 id="检测和过滤异常值"><a href="#检测和过滤异常值" class="headerlink" title="检测和过滤异常值"></a>检测和过滤异常值</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">data = DataFrame(np.random.randn(<span class="number">1000</span>,<span class="number">4</span>))</span><br><span class="line">col = data[<span class="number">3</span>]</span><br><span class="line"><span class="comment"># 找出某一列中绝对值大于3的值</span></span><br><span class="line">col[np.abs(col) &gt; <span class="number">3</span>]</span><br><span class="line"><span class="comment"># 找出data中全部大于3的值</span></span><br><span class="line">data[(np.abs(data) &gt; <span class="number">3</span>).any(<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 替换异常值</span></span><br><span class="line">data[np.abs(data) &gt; <span class="number">3</span>] = <span class="number">1</span></span><br></pre></td></tr></table></figure>
<h5 id="排列和随机采样"><a href="#排列和随机采样" class="headerlink" title="排列和随机采样"></a>排列和随机采样</h5><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">np.random.permutation(<span class="number">5</span>)</span><br><span class="line"><span class="comment"># 整数采样，从[0,5)区间上采，样本空间为20</span></span><br><span class="line">np.random.randint(<span class="number">0</span>,<span class="number">5</span>,<span class="number">20</span>)</span><br></pre></td></tr></table></figure>
<h5 id="计算指示变量、哑变量"><a href="#计算指示变量、哑变量" class="headerlink" title="计算指示变量、哑变量"></a>计算指示变量、哑变量</h5><p>本节的作用是将分类变量转换为‘哑变量矩阵’（dummy matrix）或‘指示变量矩阵0-1’（indicator matrix）.如果DataFrame中的某一列有k个不同的值，则可以派生出一个k列矩阵或DataFrame<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">data = DataFrame(&#123;<span class="string">'key'</span>:[<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'a'</span>,<span class="string">'c'</span>,<span class="string">'d'</span>],<span class="string">'value'</span>:range(<span class="number">5</span>)&#125;)</span><br><span class="line">pd.get_dummies(data[<span class="string">'key'</span>])</span><br><span class="line">$-&gt; a    b    c    d</span><br><span class="line"><span class="number">0</span>  <span class="number">1.0</span>  <span class="number">0.0</span>  <span class="number">0.0</span>  <span class="number">0.0</span></span><br><span class="line"><span class="number">1</span>  <span class="number">0.0</span>  <span class="number">1.0</span>  <span class="number">0.0</span>  <span class="number">0.0</span></span><br><span class="line"><span class="number">2</span>  <span class="number">1.0</span>  <span class="number">0.0</span>  <span class="number">0.0</span>  <span class="number">0.0</span></span><br><span class="line"><span class="number">3</span>  <span class="number">0.0</span>  <span class="number">0.0</span>  <span class="number">1.0</span>  <span class="number">0.0</span></span><br><span class="line"><span class="number">4</span>  <span class="number">0.0</span>  <span class="number">0.0</span>  <span class="number">0.0</span>  <span class="number">1.0</span></span><br><span class="line"><span class="comment"># 为新生成的列名添加前缀</span></span><br><span class="line">pd.get_dummies(data[<span class="string">'key'</span>], prefix=<span class="string">'new_'</span>)</span><br></pre></td></tr></table></figure></p>
<h5 id="字符串操作"><a href="#字符串操作" class="headerlink" title="字符串操作"></a>字符串操作</h5><h6 id="python内置的字符串库"><a href="#python内置的字符串库" class="headerlink" title="python内置的字符串库"></a>python内置的字符串库</h6><ul>
<li>strip() 修剪空白符、换行符</li>
<li>split(‘xx’) 字符串分割</li>
<li>a.join(list): 在字符串a后面接上列表list（或元组）里所有的元素</li>
<li>str.index(‘,’) 在字符串str中找到’,’的位置，如果找不到则抛出异常</li>
<li>str.find(‘,’) 在字符串str中找’,’，找到返回第一个位置，找不到返回-1</li>
<li>str.rfind(‘,’) 在字符串str中找’,’，找到返回最后一个位置，找不到返回-1</li>
<li>str.count(‘,’) 统计str中’,’的个数</li>
<li>str.replace(‘aa’,’a’) 替换</li>
<li>str.lower(), upper()  大小写转换</li>
<li>str.ljust(n), rjust(n) 用空白字符填充以满足最小长度n</li>
</ul>
<h6 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h6><ul>
<li><p>正则表达式是用于处理字符串的强大工具，拥有自己独特的语法以及一个独立的处理引擎，效率上可能不如str自带的方法，但功能十分强大。得益于这一点，在提供了正则表达式的语言里，正则表达式的语法都是一样的，区别只在于不同的编程语言实现支持的语法数量不同。下图展示了使用正则表达式进行匹配的流程：</p>
<center>![](http://ww4.sinaimg.cn/mw690/9bcfe727jw1f6unc8s9fzj20d605w0ue.jpg)</center>
</li>
<li><p>下图列出了Python支持的正则表达式元字符和语法：</p>
<center>![](http://ww3.sinaimg.cn/mw690/9bcfe727jw1f6unc85kmxj20m71brniv.jpg)</center>
</li>
<li><p>正则表达式通常用于在文本中查找匹配的字符串。Python里数量词默认是贪婪的（在少数语言里也可能是默认非贪婪），总是尝试匹配尽可能多的字符；非贪婪的则相反，总是尝试匹配尽可能少的字符。例如：正则表达式”ab*”如果用于查找”abbbc”，将找到”abbb”。</p>
</li>
<li><p>与大多数编程语言相同，正则表达式里使用”\”作为转义字符，这就可能造成反斜杠困扰。假如你需要匹配文本中的字符”\”，那么使用编程语言表示的正则表达式里将需要4个反斜杠”\\\\”：前两个和后两个分别用于在编程语言里转义成反斜杠，转换成两个反斜杠后再在正则表达式里转义成一个反斜杠。Python里的原生字符串很好地解决了这个问题，这个例子中的正则表达式可以使用r”\\”表示。同样，匹配一个数字的”\\d”可以写成r”\d”。</p>
</li>
<li><p>re模块。Python通过re模块提供对正则表达式的支持。使用re的一般步骤是先将正则表达式的字符串形式编译为Pattern实例，然后使用Pattern实例处理文本并获得匹配结果（一个Match实例），最后使用Match实例获得信息，进行其他的操作。</p>
</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> re</span><br></pre></td></tr></table></figure>
<ol>
<li><p>compile<br>re.compile(strPattern[, flag])<br>用于将字符串形式的正则表达式编译为Pattern对象,第二个参数flag是匹配模式，取值可以使用按位或运算符’|’表示同时生效。flag的可选值有：<br>re.I(re.IGNORECASE): 忽略大小写（括号内是完整写法，下同）<br>M(MULTILINE): 多行模式，改变’^’和’$’的行为（参见上图）<br>S(DOTALL): 点任意匹配模式，改变’.’的行为<br>L(LOCALE): 使预定字符类 \w \W \b \B \s \S 取决于当前区域设定<br>U(UNICODE): 使预定字符类 \w \W \b \B \s \S \d \D 取决于unicode定义的字符属性<br>X(VERBOSE): 详细模式。这个模式下正则表达式可以是多行，忽略空白字符，并可以加入注释</p>
</li>
<li><p>match<br>match(string[, pos[, endpos]]) | re.match(pattern, string[, flags])<br>这个方法将从string的pos下标处起尝试匹配pattern；如果pattern结束时仍可匹配，则返回一个Match对象；如果匹配过程中pattern无法匹配，或者匹配未结束就已到达endpos，则返回None。<br>pos和endpos的默认值分别为0和len(string)；re.match()无法指定这两个参数，参数flags用于编译pattern时指定匹配模式。 注意：这个方法并不是完全匹配。当pattern结束时若string还有剩余字符，仍然视为成功。想要完全匹配，可以在表达式末尾加上边界匹配符’$’。</p>
</li>
<li>split<br>split(string[, maxsplit]) | re.split(pattern, string[, maxsplit])<br>按照能够匹配的子串将string分割后返回列表。maxsplit用于指定最大分割次数，不指定将全部分割。</li>
<li>findall<br>findall(string[, pos[, endpos]]) | re.findall(pattern, string[, flags])<br>搜索string，以列表形式返回全部能匹配的子串</li>
<li>finditer<br>finditer(string[, pos[, endpos]]) | re.finditer(pattern, string[, flags])<br>搜索string，返回一个顺序访问每一个匹配结果（Match对象）的迭代器</li>
<li>sub<br>sub(repl, string[, count]) | re.sub(pattern, repl, string[, count])<br>使用repl替换string中每一个匹配的子串后返回替换后的字符串。<br>当repl是一个字符串时，可以使用\id或\g<id>、\g<name>引用分组，但不能使用编号0。<br>当repl是一个方法时，这个方法应当只接受一个参数（Match对象），并返回一个字符串用于替换（返回的字符串中不能再引用分组）。<br>count用于指定最多替换次数，不指定时全部替换。</name></id></li>
<li>subn<br>subn(repl, string[, count]) |re.sub(pattern, repl, string[, count])<br>返回 (sub(repl, string[, count]), 替换次数)</li>
</ol>
<p><b><a href="http://www.cnblogs.com/huxi/archive/2010/07/04/1771073.html" target="_blank" rel="noopener">原文地址与示例</a><b></b></b></p>
<h6 id="pandas中矢量化的字符串操作"><a href="#pandas中矢量化的字符串操作" class="headerlink" title="pandas中矢量化的字符串操作"></a>pandas中矢量化的字符串操作</h6><p>通过Series的str方法获取Series中值得字符串内容，函数示例</p>
<ul>
<li>data.str.constins(‘hello’), 返回一个bool型的Series对象</li>
<li>data.str.findall(pattern,flags=re.IGNORECASE)</li>
<li>matches = data.str.match(pattern, flags=re.IGNORECASE)</li>
<li>matches.str.get(1) 矢量化元素获取</li>
<li>matches.str[1] 矢量化元素获取(效果和上一个一致),也支持分片操作</li>
</ul>
<center>矢量化的字符串方法</center>

<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">method</th>
<th style="text-align:center">explanation</th>
<th style="text-align:center">method</th>
<th style="text-align:center">explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">cat</td>
<td style="text-align:center">元素级的字符串连接操作，可指定分隔符</td>
<td style="text-align:center">contains</td>
<td style="text-align:center">返回各字符串是否包含指定模式的bool数组</td>
</tr>
<tr>
<td style="text-align:center">count</td>
<td style="text-align:center">模式出现的次数</td>
<td style="text-align:center">endswith,startswith</td>
<td style="text-align:center">各元素是否以指定的模式开头、结尾，返回bool数组</td>
</tr>
<tr>
<td style="text-align:center">findall</td>
<td style="text-align:center">计算各字符串的模式列表</td>
<td style="text-align:center">get</td>
<td style="text-align:center">获取各元素的第i个字符</td>
</tr>
<tr>
<td style="text-align:center">join</td>
<td style="text-align:center">根据指定的分隔符将各元素的字符串连接起来</td>
<td style="text-align:center">len</td>
<td style="text-align:center">计算各字符串的长度</td>
</tr>
<tr>
<td style="text-align:center">lower,upper</td>
<td style="text-align:center">大小写转换</td>
<td style="text-align:center">match</td>
<td style="text-align:center">根据给定模式，执行re.match()</td>
</tr>
<tr>
<td style="text-align:center">pad</td>
<td style="text-align:center">在字符串左边/右边或两边添加空白符</td>
<td style="text-align:center">center</td>
<td style="text-align:center">相当于pad(side=’both’)</td>
</tr>
<tr>
<td style="text-align:center">repeat</td>
<td style="text-align:center">重复操作，在字符串上就是多个相同的拼接</td>
<td style="text-align:center">replace</td>
<td style="text-align:center">替换指定模式</td>
</tr>
<tr>
<td style="text-align:center">slice</td>
<td style="text-align:center">对各个字符串进行子串分片操作</td>
<td style="text-align:center">split</td>
<td style="text-align:center">根据指定模式，对字符串切割</td>
</tr>
<tr>
<td style="text-align:center">strip,rstrip,lstrip</td>
<td style="text-align:center">去空白符，换行符</td>
<td style="text-align:center"></td>
</tr>
</tbody>
</table>
</div>
<h4 id="数据聚合"><a href="#数据聚合" class="headerlink" title="数据聚合"></a>数据聚合</h4><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">df</span><br><span class="line">$-&gt;   data1     data2 key1 key2</span><br><span class="line"><span class="number">0</span>  <span class="number">2.128648</span>  <span class="number">0.552487</span>    a  one</span><br><span class="line"><span class="number">1</span>  <span class="number">2.040146</span> <span class="number">-0.974248</span>    a  two</span><br><span class="line"><span class="number">2</span> <span class="number">-1.442976</span> <span class="number">-0.404534</span>    b  one</span><br><span class="line"><span class="number">3</span>  <span class="number">1.796789</span> <span class="number">-1.413561</span>    b  two</span><br><span class="line"><span class="number">4</span>  <span class="number">0.429355</span>  <span class="number">0.604959</span>    a  one</span><br></pre></td></tr></table></figure>
<h5 id="GroupBy"><a href="#GroupBy" class="headerlink" title="GroupBy"></a>GroupBy</h5><ul>
<li>groupby用于DataFrame上，假定要按‘key’进行分组，并计算‘value’列的值，默认在axis=0上分组</li>
<li>grouped = df[‘value’].groupby(df[‘key’])   grouped是一个GroupBy对象，只包含一些有关分组建的中间数据</li>
<li>上面的等价语法为：df.groupby(df[‘key’])[‘value’]或者df.groupby(df[‘key’])[[‘value’]]</li>
<li>grouped.mean()  使用GroupBy的方法进行计算</li>
<li>分组键可以不止一个，groupby(df[‘key1’,’key2’])，得到层次索引结果</li>
<li>分组键可是任意长度适当的数组，可以是字符串、数字或其他python对象，比如’key1’，也可以按照列的类型dtype进行分组: df.groupby(df.dtypes, axis=1)</li>
<li>df.groupby(df[‘key’]).mean() 对df的所有数值列求值，非数值列自动忽略</li>
<li>df.groupby(df[‘key’]).size() 返回含有分组大小的Series</li>
<li>grouped.describe()等方法也是可以用在这里的</li>
</ul>
<h5 id="分组迭代"><a href="#分组迭代" class="headerlink" title="分组迭代"></a>分组迭代</h5><ul>
<li>GroupBy对象支持迭代，可以产生一组二元分组（由分组名和数据块组成）</li>
<li>for name,group in df.groupby(df[‘key’]) 将返回df[‘key’]每一种可能的值以及其对应的df行集合</li>
<li>for (k1, k2),group in df.groupby(df[‘key1’, ‘key2’])</li>
</ul>
<p>groupby对象字典化<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">grouped = df.groupby(<span class="string">'key1'</span>)</span><br><span class="line"></span><br><span class="line">glist = list(grouped)  <span class="comment"># glist中包含的是(分组名, 数据块)组成的元组</span></span><br><span class="line">$-&gt; [('a',</span><br><span class="line">        data1     data2 key1 key2</span><br><span class="line">  <span class="number">0</span>  <span class="number">2.128648</span>  <span class="number">0.552487</span>    a  one</span><br><span class="line">  <span class="number">1</span>  <span class="number">2.040146</span> <span class="number">-0.974248</span>    a  two</span><br><span class="line">  <span class="number">4</span>  <span class="number">0.429355</span>  <span class="number">0.604959</span>    a  one),</span><br><span class="line">     (<span class="string">'b'</span>,</span><br><span class="line">        data1     data2 key1 key2</span><br><span class="line">  <span class="number">2</span> <span class="number">-1.442976</span> <span class="number">-0.404534</span>    b  one</span><br><span class="line">  <span class="number">3</span>  <span class="number">1.796789</span> <span class="number">-1.413561</span>    b  two)]</span><br><span class="line"></span><br><span class="line">gdict = dict(glist)  <span class="comment"># 字典化</span></span><br><span class="line">$-&gt; &#123;'a':       data1     data2 key1 key2</span><br><span class="line">         <span class="number">0</span>  <span class="number">2.128648</span>  <span class="number">0.552487</span>    a  one</span><br><span class="line">         <span class="number">1</span>  <span class="number">2.040146</span> <span class="number">-0.974248</span>    a  two</span><br><span class="line">         <span class="number">4</span>  <span class="number">0.429355</span>  <span class="number">0.604959</span>    a  one,</span><br><span class="line">     <span class="string">'b'</span>:       data1     data2 key1 key2</span><br><span class="line">         <span class="number">2</span> <span class="number">-1.442976</span> <span class="number">-0.404534</span>    b  one</span><br><span class="line">         <span class="number">3</span>  <span class="number">1.796789</span> <span class="number">-1.413561</span>    b  two&#125;</span><br><span class="line"></span><br><span class="line">dict(list(df.groupby(df.dtypes, axis=<span class="number">1</span>)))</span><br></pre></td></tr></table></figure></p>
<h5 id="分组"><a href="#分组" class="headerlink" title="分组"></a>分组</h5><h6 id="通过字典或者Series进行分组"><a href="#通过字典或者Series进行分组" class="headerlink" title="通过字典或者Series进行分组"></a>通过字典或者Series进行分组</h6><p>比如说现在dataframe有列’a’,’b’,’c’,’d’,’e’，通过如下代码<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mapping = &#123;<span class="string">'a'</span>:<span class="string">'red'</span>,<span class="string">'b'</span>:<span class="string">'blue'</span>,<span class="string">'c'</span>:<span class="string">'red'</span>,<span class="string">'d'</span>:<span class="string">'red'</span>,<span class="string">'e'</span>:<span class="string">'blue'</span>&#125;</span><br><span class="line"><span class="comment"># 将字典传给groupby函数，设置axis=1（这是合并列）</span></span><br><span class="line">by_column = df.groupby(mapping, axis=<span class="number">1</span>)</span><br><span class="line">by_column.sum()  <span class="comment"># 对映射到相同名称的列求和，结果的列只有'red'和'blue'</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Series也有同样的功能</span></span><br><span class="line">map_series(mapping)</span><br><span class="line">df.groupby(map_series, axis=<span class="number">1</span>).sum()</span><br></pre></td></tr></table></figure></p>
<h6 id="通过函数进行分组"><a href="#通过函数进行分组" class="headerlink" title="通过函数进行分组"></a>通过函数进行分组</h6><p>比如说索引为字符串，若想按照字符串长度进行分组，则可以：<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">df.groupby(len).sum()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将函数跟数组、列表、字典等结合起来使用也可以</span></span><br><span class="line">key_list = [<span class="string">'one'</span>,<span class="string">'one'</span>,<span class="string">'one'</span>,<span class="string">'two'</span>,<span class="string">'two'</span>]</span><br><span class="line">df.groupby([len, key_list]).sum() <span class="comment"># 得到一个层次化索引的结果</span></span><br></pre></td></tr></table></figure></p>
<h6 id="通过索引级别进行分组"><a href="#通过索引级别进行分组" class="headerlink" title="通过索引级别进行分组"></a>通过索引级别进行分组</h6><p>通过level关键字传入级别编号或名称，按照索引级别进行分组<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">columns = pd.MultiIndex.from_arrays([[<span class="string">'US'</span>,<span class="string">'US'</span>,<span class="string">'US'</span>,<span class="string">'JP'</span>,<span class="string">'JP'</span>],[<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">1</span>,<span class="number">3</span>]], names=[<span class="string">'country'</span>,<span class="string">'tenor'</span>])</span><br><span class="line">df = DataFrame(np.random.randn(<span class="number">4</span>,<span class="number">5</span>), columns=columns)</span><br><span class="line">df.groupby(level=<span class="string">'country'</span>, axis=<span class="number">1</span>).count()</span><br><span class="line">$-&gt;</span><br><span class="line">country  JP  US</span><br><span class="line"><span class="number">0</span>         <span class="number">2</span>   <span class="number">3</span></span><br><span class="line"><span class="number">1</span>         <span class="number">2</span>   <span class="number">3</span></span><br><span class="line"><span class="number">2</span>         <span class="number">2</span>   <span class="number">3</span></span><br><span class="line"><span class="number">3</span>         <span class="number">2</span>   <span class="number">3</span></span><br></pre></td></tr></table></figure></p>
<h5 id="聚合方法"><a href="#聚合方法" class="headerlink" title="聚合方法"></a>聚合方法</h5><p>自定义聚合函数，将其传入<b>agg或者aggregate方法</b>即可</p>
<center>经过优化的groupby方法，可以传入函数名字符串进行调用</center>

<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">method</th>
<th style="text-align:center">explanation</th>
<th style="text-align:center">method</th>
<th style="text-align:center">explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">count</td>
<td style="text-align:center">分组中非NAN值的数量</td>
<td style="text-align:center">sum</td>
<td style="text-align:center">非NAN值的和</td>
</tr>
<tr>
<td style="text-align:center">mean</td>
<td style="text-align:center">非NAN值的均值</td>
<td style="text-align:center">median</td>
<td style="text-align:center">非NAN值的中值</td>
</tr>
<tr>
<td style="text-align:center">std,var</td>
<td style="text-align:center">无偏(分母n-1)标准差和方差</td>
<td style="text-align:center">min,max</td>
<td style="text-align:center">非NAN值的最值</td>
</tr>
<tr>
<td style="text-align:center">prod</td>
<td style="text-align:center">非NAN值的乘积</td>
<td style="text-align:center">first,last</td>
<td style="text-align:center">第一个、最后一个非NAN值</td>
</tr>
</tbody>
</table>
</div>
<h6 id="面向列的多函数应用"><a href="#面向列的多函数应用" class="headerlink" title="面向列的多函数应用"></a>面向列的多函数应用</h6><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 传入一个函数列表执行多个函数，每个函数的执行结果单成一列</span></span><br><span class="line">grouped[<span class="string">'data3'</span>].agg([<span class="string">'mean'</span>, <span class="string">'std'</span>, my_function])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 传入由(name, function)元组组成的列表时，每个元组第一个元素成为结果DataFrame的列名，第二个元素是对应此列名上的函数</span></span><br><span class="line">grouped.agg([(<span class="string">'data1'</span>,<span class="string">'mean'</span>), (<span class="string">'data2'</span>,<span class="string">'std'</span>)])</span><br><span class="line"></span><br><span class="line"><span class="comment"># 不同的列对应不同的函数，可传入字典</span></span><br><span class="line">grouped.agg(&#123;<span class="string">'data1'</span>:[<span class="string">'min'</span>,<span class="string">'max'</span>], <span class="string">'data2'</span>:[np.max, <span class="string">'std'</span>])</span><br></pre></td></tr></table></figure>
<h6 id="聚合结果索引变换"><a href="#聚合结果索引变换" class="headerlink" title="聚合结果索引变换"></a>聚合结果索引变换</h6><p>python聚合返回结果时，向groupby函数传入: <b>as_index=False<b> 取消由分组键形成索引，而是将分组键变成列，把简单数字作为索引。对结果调用reset_index()也能得到这样的结果。</b></b></p>
<h4 id="分组运算与转换"><a href="#分组运算与转换" class="headerlink" title="分组运算与转换"></a>分组运算与转换</h4><h5 id="transform"><a href="#transform" class="headerlink" title="transform"></a>transform</h5><p>transform函数接收一个函数，并将这个函数应用到各个分组，然后将每个分组的结果放置在这个分组对应的每一个元素上，最后显示它。<br><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">people</span><br><span class="line">$-&gt;</span><br><span class="line">               a         b         c         d         e</span><br><span class="line">Joe    <span class="number">-0.338386</span>  <span class="number">0.849100</span> <span class="number">-1.951048</span> <span class="number">-1.153923</span> <span class="number">-1.672975</span></span><br><span class="line">Steve  <span class="number">-0.490588</span>  <span class="number">0.408497</span> <span class="number">-0.692801</span> <span class="number">-0.100917</span>  <span class="number">0.970808</span></span><br><span class="line">Wes    <span class="number">-1.603786</span>       NaN       NaN <span class="number">-0.534380</span>  <span class="number">0.847692</span></span><br><span class="line">Jim     <span class="number">0.309432</span>  <span class="number">2.768331</span> <span class="number">-0.454094</span> <span class="number">-1.026735</span> <span class="number">-0.679794</span></span><br><span class="line">Travis <span class="number">-1.400938</span> <span class="number">-0.865599</span> <span class="number">-0.190541</span> <span class="number">-0.835916</span>  <span class="number">0.315975</span></span><br><span class="line"></span><br><span class="line">key=[<span class="string">'one'</span>,<span class="string">'two'</span>,<span class="string">'one'</span>,<span class="string">'two'</span>,<span class="string">'one'</span>]</span><br><span class="line">people.groupby(key).mean()</span><br><span class="line">$-&gt;      a         b         c         d         e</span><br><span class="line">one <span class="number">-1.114370</span> <span class="number">-0.008250</span> <span class="number">-1.070794</span> <span class="number">-0.841406</span> <span class="number">-0.169769</span></span><br><span class="line">two <span class="number">-0.090578</span>  <span class="number">1.588414</span> <span class="number">-0.573447</span> <span class="number">-0.563826</span>  <span class="number">0.145507</span></span><br><span class="line"></span><br><span class="line">people.groupby(key).transform(np.mean)</span><br><span class="line">$-&gt;         a         b         c         d         e</span><br><span class="line">Joe    <span class="number">-1.114370</span> <span class="number">-0.008250</span> <span class="number">-1.070794</span> <span class="number">-0.841406</span> <span class="number">-0.169769</span></span><br><span class="line">Steve  <span class="number">-0.090578</span>  <span class="number">1.588414</span> <span class="number">-0.573447</span> <span class="number">-0.563826</span>  <span class="number">0.145507</span></span><br><span class="line">Wes    <span class="number">-1.114370</span> <span class="number">-0.008250</span> <span class="number">-1.070794</span> <span class="number">-0.841406</span> <span class="number">-0.169769</span></span><br><span class="line">Jim    <span class="number">-0.090578</span>  <span class="number">1.588414</span> <span class="number">-0.573447</span> <span class="number">-0.563826</span>  <span class="number">0.145507</span></span><br><span class="line">Travis <span class="number">-1.114370</span> <span class="number">-0.008250</span> <span class="number">-1.070794</span> <span class="number">-0.841406</span> <span class="number">-0.169769</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 传入自定义的函数也可以，需要注意的是自定义函数的输入参数是已经分好组的各个分组</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">my_function</span><span class="params">(arr)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> arr-arr.mean()</span><br></pre></td></tr></table></figure></p>
<h5 id="apply：拆分-应用-合并"><a href="#apply：拆分-应用-合并" class="headerlink" title="apply：拆分-应用-合并"></a>apply：拆分-应用-合并</h5><ul>
<li>apply 将待处理的对象拆成多个分段，然后对各分段调用传入的函数，最后尝试将各分段组合到一起</li>
<li>分段组合需要用到pandas.concat函数</li>
<li>apply 传入函数名，这里传入的函数需要包括：分好组的DataFrame分段，也可以包括一些其他的参数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 取列'tip_pct'排前五的记录</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">top</span><span class="params">(df, n=<span class="number">5</span>, col=<span class="string">'tip_pct'</span>)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> df.sort_index(by=col)[-n:]</span><br><span class="line">df.groupby(<span class="string">'smoker'</span>).apply(top)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 禁止分组键</span></span><br><span class="line">df.groupby(<span class="string">'smoker'</span>, group_keys=<span class="keyword">False</span>).apply(top)</span><br></pre></td></tr></table></figure>
<h6 id="分位数和桶分析"><a href="#分位数和桶分析" class="headerlink" title="分位数和桶分析"></a>分位数和桶分析</h6><ul>
<li>pandas中面元划分、样本分位数划分的函数cut和qcut可以和groupby结合起来</li>
<li>函数cut和qcut返回的对象可以作为groupby函数的参数</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">get_status</span><span class="params">(group)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> &#123;<span class="string">'min'</span>:group.min, <span class="string">'max'</span>:group.max, <span class="string">'count'</span>:group.count&#125;</span><br><span class="line"></span><br><span class="line">factor = pd.cut(df.data1, <span class="number">4</span>) <span class="comment"># labels=False，只获取分位数编号</span></span><br><span class="line">grouped = df.data2.groupby(factor)</span><br><span class="line">grouped.apply(get_status).unstack()</span><br></pre></td></tr></table></figure>
<h5 id="透视表与交叉表"><a href="#透视表与交叉表" class="headerlink" title="透视表与交叉表"></a>透视表与交叉表</h5><h6 id="透视表"><a href="#透视表" class="headerlink" title="透视表"></a>透视表</h6><ul>
<li>根据一个或多个键对数据进行聚合，并根据行和列上的分组键将数据分配到各个矩形区域中</li>
<li>DataFrame有个pivot_table函数</li>
<li>顶级函数：pandas.pivot_table</li>
</ul>
<center>pivot_table的参数</center>

<div class="table-container">
<table>
<thead>
<tr>
<th style="text-align:center">method</th>
<th style="text-align:center">explanation</th>
<th style="text-align:center">method</th>
<th style="text-align:center">explanation</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">values</td>
<td style="text-align:center">待聚合列的名称，默认为所有数值列</td>
<td style="text-align:center">rows</td>
<td style="text-align:center">用于分组的列名或其他分组键，出现在结果透视图的行</td>
</tr>
<tr>
<td style="text-align:center">cols</td>
<td style="text-align:center">用于分组的列名或其他分组键，出现在结果透视图的列</td>
<td style="text-align:center">aggfunc</td>
<td style="text-align:center">聚合函数或函数列表，默认为mean。可以是任何对groupby有效的函数</td>
</tr>
<tr>
<td style="text-align:center">fill_value</td>
<td style="text-align:center">用于替换结果表中的缺失值</td>
<td style="text-align:center">margin</td>
<td style="text-align:center">添加行列小计，默认为False</td>
</tr>
</tbody>
</table>
</div>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 第一个参数是表格内容，如果不设置，则默认为pivot_table中的默认聚合类型</span></span><br><span class="line"><span class="comment"># 设置参数 rows，设置行内容和索引，</span></span><br><span class="line"><span class="comment"># 设置参数 cols，设置列内容和索引</span></span><br><span class="line">tips.pivot_table([<span class="string">'tip_pct'</span>,<span class="string">'size'</span>], rows=[<span class="string">'sex'</span>,<span class="string">'day'</span>], cols=<span class="string">'smoker'</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置：margins=True，添加分项小计，默认为平均值</span></span><br><span class="line">tips.pivot_table([<span class="string">'tip_pct'</span>,<span class="string">'size'</span>], rows=[<span class="string">'sex'</span>,<span class="string">'day'</span>], cols=<span class="string">'smoker'</span>, margins=<span class="keyword">True</span>)</span><br><span class="line"><span class="comment"># 要使用其他小计函数，可以使用：aggfunc参数</span></span><br><span class="line">tips.pivot_table([<span class="string">'tip_pct'</span>,<span class="string">'size'</span>], rows=[<span class="string">'sex'</span>,<span class="string">'day'</span>], cols=<span class="string">'smoker'</span>, margins=<span class="keyword">True</span>,aggfunc=<span class="string">'sum'</span>)</span><br></pre></td></tr></table></figure>
<h6 id="交叉表"><a href="#交叉表" class="headerlink" title="交叉表"></a>交叉表</h6><ul>
<li>交叉表是一种用于计算分组频率的特殊透视表</li>
<li>pandas.crosstab函数可以统计交叉表</li>
</ul>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># param1: 用于分组的列名或其他分组键，出现在结果透视图的行</span></span><br><span class="line"><span class="comment"># param2: 用于分组的列名或其他分组键，出现在结果透视图的列</span></span><br><span class="line"><span class="comment"># margins=True：行、列小计</span></span><br><span class="line">pd.crosstab(param1, param2, margins=<span class="keyword">True</span>)</span><br></pre></td></tr></table></figure>

        
        </div>
        <footer class="article-footer">
            <div class="share-container">



</div>

    <a data-url="atlantic8.github.io/2016/08/15/python数据规整-分组-聚合/" data-id="ck0tqfn6p00a6a8phlhbo7mjx" class="article-share-link"><i class="fas fa-share"></i>分享到</a>
<script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();

            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;

            if ($('#' + id).length) {
                box = $('#' + id);

                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fab fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fab fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fab fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fab fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');

              box = $(html);

              $('body').append(box);
            }

            $('.article-share-box.on').hide();

            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');

        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();

            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
</script>

            
    

        </footer>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2016/08/25/Remove-Duplicate-Letters/" id="article-nav-newer" class="article-nav-link-wrap">
            <strong class="article-nav-caption">上一篇</strong>
            <div class="article-nav-title">
                
                    Remove Duplicate Letters
                
            </div>
        </a>
    
    
        <a href="/2016/08/15/python时间序列分析/" id="article-nav-older" class="article-nav-link-wrap">
            <strong class="article-nav-caption">下一篇</strong>
            <div class="article-nav-title">python时间序列分析</div>
        </a>
    
</nav>


    
</article>


    
    

</section>
            
                
<aside id="sidebar">
   
        
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2019/09/21/CherryPy-Torturial/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Other/">Other</a></p>
                            <p class="item-title"><a href="/2019/09/21/CherryPy-Torturial/" class="title">CherryPy Torturial</a></p>
                            <p class="item-date"><time datetime="2019-09-21T15:51:48.000Z" itemprop="datePublished">2019-09-21</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/12/16/Hough-Transform/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Algorithm/">Algorithm</a></p>
                            <p class="item-title"><a href="/2018/12/16/Hough-Transform/" class="title">Hough Transform</a></p>
                            <p class="item-date"><time datetime="2018-12-16T13:32:21.000Z" itemprop="datePublished">2018-12-16</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/12/16/GRU-and-LSTM/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Algorithm/">Algorithm</a></p>
                            <p class="item-title"><a href="/2018/12/16/GRU-and-LSTM/" class="title">GRU and LSTM</a></p>
                            <p class="item-date"><time datetime="2018-12-16T13:27:29.000Z" itemprop="datePublished">2018-12-16</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2018/12/16/how-does-shazam-work/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Algorithm/">Algorithm</a></p>
                            <p class="item-title"><a href="/2018/12/16/how-does-shazam-work/" class="title">how does shazam work</a></p>
                            <p class="item-date"><time datetime="2018-12-16T13:06:11.000Z" itemprop="datePublished">2018-12-16</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/08/27/Conditional-Random-Field/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/Algorithm/">Algorithm</a></p>
                            <p class="item-title"><a href="/2017/08/27/Conditional-Random-Field/" class="title">Conditional Random Field</a></p>
                            <p class="item-date"><time datetime="2017-08-27T06:19:20.000Z" itemprop="datePublished">2017-08-27</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Algorithm/">Algorithm</a><span class="category-list-count">40</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/OJ/">OJ</a><span class="category-list-count">53</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Other/">Other</a><span class="category-list-count">2</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/12/">十二月 2018</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/08/">八月 2017</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/07/">七月 2017</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">六月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">五月 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/04/">四月 2017</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/03/">三月 2017</a><span class="archive-list-count">9</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/02/">二月 2017</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">一月 2017</a><span class="archive-list-count">6</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/12/">十二月 2016</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">十一月 2016</a><span class="archive-list-count">10</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/10/">十月 2016</a><span class="archive-list-count">2</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/09/">九月 2016</a><span class="archive-list-count">35</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">八月 2016</a><span class="archive-list-count">8</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">七月 2016</a><span class="archive-list-count">5</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">六月 2016</a><span class="archive-list-count">3</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a><span class="archive-list-count">8</span></li></ul>
        </div>
    </div>

    
        
    <div class="widget-wrap">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/Backtracking/" style="font-size: 11.11px;">Backtracking</a> <a href="/tags/Binary-Search/" style="font-size: 11.11px;">Binary Search</a> <a href="/tags/Binary-Tree/" style="font-size: 16.67px;">Binary Tree</a> <a href="/tags/Cpp/" style="font-size: 15.56px;">Cpp</a> <a href="/tags/DFS/" style="font-size: 10px;">DFS</a> <a href="/tags/DP/" style="font-size: 16.67px;">DP</a> <a href="/tags/Deep-Learning/" style="font-size: 10px;">Deep Learning</a> <a href="/tags/Divide-Conquer/" style="font-size: 10px;">Divide & Conquer</a> <a href="/tags/Game-Theory/" style="font-size: 10px;">Game Theory</a> <a href="/tags/Geometry/" style="font-size: 10px;">Geometry</a> <a href="/tags/Greedy/" style="font-size: 13.33px;">Greedy</a> <a href="/tags/IPython/" style="font-size: 10px;">IPython</a> <a href="/tags/Java/" style="font-size: 13.33px;">Java</a> <a href="/tags/LeetCode/" style="font-size: 20px;">LeetCode</a> <a href="/tags/MIR/" style="font-size: 10px;">MIR</a> <a href="/tags/Machine-Learning/" style="font-size: 10px;">Machine Learning</a> <a href="/tags/Math/" style="font-size: 12.22px;">Math</a> <a href="/tags/Matlab/" style="font-size: 10px;">Matlab</a> <a href="/tags/NLP/" style="font-size: 12.22px;">NLP</a> <a href="/tags/POJ/" style="font-size: 11.11px;">POJ</a> <a href="/tags/Permutation/" style="font-size: 10px;">Permutation</a> <a href="/tags/STL/" style="font-size: 10px;">STL</a> <a href="/tags/Sliding-window/" style="font-size: 14.44px;">Sliding window</a> <a href="/tags/Sort/" style="font-size: 11.11px;">Sort</a> <a href="/tags/State-Machine/" style="font-size: 10px;">State Machine</a> <a href="/tags/String/" style="font-size: 14.44px;">String</a> <a href="/tags/Tree/" style="font-size: 10px;">Tree</a> <a href="/tags/bit/" style="font-size: 10px;">bit</a> <a href="/tags/deep-learning/" style="font-size: 10px;">deep learning</a> <a href="/tags/git/" style="font-size: 10px;">git</a> <a href="/tags/github/" style="font-size: 10px;">github</a> <a href="/tags/machine-learning/" style="font-size: 18.89px;">machine learning</a> <a href="/tags/music-information-retrieval/" style="font-size: 10px;">music information retrieval</a> <a href="/tags/numpy/" style="font-size: 11.11px;">numpy</a> <a href="/tags/other/" style="font-size: 10px;">other</a> <a href="/tags/pandas/" style="font-size: 11.11px;">pandas</a> <a href="/tags/prime/" style="font-size: 10px;">prime</a> <a href="/tags/python/" style="font-size: 17.78px;">python</a> <a href="/tags/random-algorithm/" style="font-size: 12.22px;">random algorithm</a> <a href="/tags/recommender-system/" style="font-size: 10px;">recommender system</a> <a href="/tags/time-series-data/" style="font-size: 10px;">time_series_data</a> <a href="/tags/visualization/" style="font-size: 10px;">visualization</a> <a href="/tags/web/" style="font-size: 10px;">web</a> <a href="/tags/数据分析/" style="font-size: 10px;">数据分析</a> <a href="/tags/文件/" style="font-size: 10px;">文件</a>
        </div>
    </div>

    
        
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="https://xueshu.glgoo.org/">Google Scholar Mirror</a>
                    </li>
                
                    <li>
                        <a href="https://www.kaggle.com/">Kaggle</a>
                    </li>
                
                    <li>
                        <a href="http://mlr.cs.umass.edu/ml/datasets.html">UCI dataset</a>
                    </li>
                
                    <li>
                        <a href="https://leetcode.com/problemset/algorithms/">LeetCode</a>
                    </li>
                
            </ul>
        </div>
    </div>


    
    <div id="toTop" class="fas fa-angle-up"></div>
</aside>

            
        </div>
        <footer id="footer">
    <div class="outer">
        <div id="footer-info" class="inner">
            &copy; 2019 Atlantic8<br>
            Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        </div>
    </div>
</footer>
        


    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    
        <script type="text/x-mathjax-config">
            MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });
        </script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script>
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
            inlineMath: [ ["$","$"], ["\\(","\\)"] ],
            skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code'],
            processEscapes: true
        }
    });
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax();
        for (var i = 0; i < all.length; ++i)
            all[i].SourceElement().parentNode.className += ' has-jax';
    });
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML"></script><!-- hexo-inject:begin --><!-- hexo-inject:end -->
</body>
</html>